= Radiant Comments Extension

Adds blog-like comment functionality to Radiant. 

== Patches

This software "works for me", but it may not work for you, depending on your particular environment or setup. Feel free to modify it in any way. If you do make changes that would be useful to others, please send a patch to ryan at artofmission (dot you-know-what), and I will see that it gets applied. 

== Dependencies

* Requires Radiant 0.6.7 or greater. 
* Requires will_paginate Rails plugin (svn://errtheblog.com/svn/plugins/will_paginate)

== Caveats

* Relative urls will *not* work on comment pages if they fail validation, since the page gets re-rendered
  at a (probably) different level of the hierarchy. Always use absolute urls and you won't have any issues.

== Usage

Remember to run the migration. This _WILL_ delete any snippets named 'comment', 'comments' and 'comment_form' if these exist.

  rake radiant:extensions:comments:migrate

To enable spam protection, you will need to set your Akismet key and url in the Radiant config.
  
=== In your layout: 

  <r:snippet name="comments" />

=== Snippets

The snippets "comments", "comment" and "comment_form" are created by the migration. These can be found under snippets, and can be customised after your needs. The snippets are the following:

=== Snippet: comments

<r:if_comments>
  <div class="comments">
    <h2>Comments</h2>
    <r:comments:each>
      <r:snippet name="comment" />
    </r:comments:each>
  </div>
</r:if_comments>
<r:snippet name="comment_form" />
	

=== Snippet: comment

<div class="comment">
  <p class="author"><r:comments:field:author /> said on <r:comments:date />:</p>
  <div class="content_html"><r:comments:field:content_html /></div>
</div>

=== Snippet: comment_form

<r:page>
  <r:if_enable_comments>
    <r:comments:form>
      <h3>Post a comment</h3>
      <r:error><p style="color:red">Please correct the errors below.</p></r:error>
      <p><label for="comment[author]">Your Name</label><br />
      <r:error on="author"><p style="color:red">Name <r:message /></p></r:error>
      <r:text_field_tag name="author" id="author" class="required" /></p>

      <p><label for="comment[author_email]">Your Email Address</label> (required, but not displayed)<br />
      <r:error on="author_email"><p style="color:red">Email <r:message /></p></r:error>
      <r:text_field_tag name="author_email" class="required" /></p>

      <p><label for="comment[author_url]">Your Web Address</label> (optional)<br />
      <r:error on="author_url"><p style="color:red">Web Address <r:message /></p></r:error>
      <r:text_field_tag name="author_url" /></p>

      <p><label for="comment[content]">Your Comment</label><br />
      <r:error on="content"><p style="color:red">Comment <r:message /></p></r:error>
      <label for="comment[filter_id]">Filter: <r:filter_box_tag name="filter_id" value="Textile" /><br />
      <r:text_area_tag name="content" class="required" rows="9" cols="40" /></p>

      <r:submit_tag name="submit" value="Save Comment" />

    </r:comments:form>
  </r:if_enable_comments>
</r:page>

=== Contributors

* Nathaniel Talbott of http://terralien.com/, sponsored by http://ignitesocialmedia.com/.